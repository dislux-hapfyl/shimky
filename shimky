. pnk.lang

MP3_DIR=

fa=RecvTxt
fb=SendTxt
fc=StatTxt
fd=ShellTxt
ta=rcvWidget
tb=sndWidget
td=shellOutput
ws=mp3Cmd
wl=musicBox 
M=master

oa="i$fa.$ta"
ob="i$fb.$tb"
od="i$fd.$td"

aa='fg="white"'
bb='bg="#222"'
bd=bg=$bg
ca='font=("VictorMono",20)'
cb='font=("Iosevka",18)'
cc='font=("VictorMono",14)'
ee='cursor="heart"'
ff='cursor="shuttle"'
fcs='cursor="spider"'
gg='highlightbackground="#111"'
hh='highlightbackground="#444"'
ia='highlightcolor="#2BCDBB"'
ic='highlightcolor="blue"'
ib='highlightcolor="red"'
id='highlightcolor="orange"'
ja='insertbackground="red"'
jb='insertbackground="orange"'
jc='insertbackground="green"'
kk='relief="flat"'
uu='undo=True'
ll='padx=12'
mm='pady=12'
ds='state="disabled"'
en='state="normal"'
wa='height=3'
wd='height=16'
iw='insertwidth=5'

opta=$aa,$bb,$ca,$ee,$gg,$ib,$ja,$kk,$ll,$mm,$ds,$uu,$iw
optb=$aa,$bb,$cb,$ff,$hh,$ia,$jb,$kk,$ll,$mm,$uu,$wa,$iw
optc=$aa,$bb,$cc,$fcs,$gg,$ic,$jc,$kk,$uu,$iw
optd=$aa,$bd,$cb,$ee,$gg,$id,$jc,$kk,$ll,$mm,$uu,$iw,$wd

ZDshebang 
ZDfrm tkinter Tk,Frame,Text,Listbox,PanedWindow
ZDfrm re finditer
ZDfrm threading Thread
ZDfrm os listdir,system,rename,path
ZDfrm pytube YouTube
ZDimp subprocess
ZDimp datetime


ZFtoorwin Shimky
XFpnwin pw '"horizontal"'
XFpk pw 1 both

XFbinda Control-w startNew
XFfc z startNew

YDdefe startNew
XIcv this App
XFfc zz pw.add this


ZDcld App
XIcv i$fb $fb
XIcv i$fa $fa

XFpk i$fb 0 none 
XFpk i$fa 1 y

XFfc z tagConf

XFfc z runSyntax

XFbind $oa Escape myExit
XFbind $oa Shift_R doSyntax
XFbind $ob Control-n myinsert
XFbind $ob Shift_R sendCode
XFbind $ob Control-Shift_R mapit
XFbind $ob Alt-Shift_R mapitOut
XFbind $ob Control-g fgoa
XFbind $ob Control-j bgoa 
XFbind $ob Control-G fgob
XFbind $ob Control-J bgob
XFbind $ob Control-m fntoa
XFbind $ob Control-M fntob
XFbind $ob Return cliSyntax

YDsyntax


YDdefe cliSyntax
XFfc zz syntax $ob
XFfc z doSyntax

YDdefp notif n,m
XIv z n n
XIv z m m
XFtins $ob end "f\"\n$datenow {n} {m}\n\""
XFfc z $ob.see '"end"'


YDdefp thdStart x
XIv z x x
XIfv - thd Thread 'target=x,daemon=True'
XFfc - thd.start


YDdefe runSyntax
XFfc zz thdStart doSyntax


YDdefp chgfg w
XIv z w w
XItgetln $ob fgcolor
XFcfg w. 'fg=fgcolor'


YDdefp chgbg w
XIv z w w
XItgetln $ob bgcolor
XFcfg w. 'bg=bgcolor'


YDdefe fgoa
XFfc zz chgfg $oa


YDdefe bgoa
XFfc zz chgbg $oa


YDdefe fgob
XFfc zz chgfg $ob


YDdefe bgob
XFfc zz chgbg $ob


YDdefe fntoa
XItgetln $ob fntsz
XIv - fn 'int(fntsz)'
XFcfg $oa. 'font=("VictorMono",fn)'


YDdefe fntob
XItgetln $ob fntsz
XIv - fn 'int(fntsz)'
XFcfg $ob. 'font=("Iosevka",fn)'


XIgetcmd() {
	XIfv -z filename $ob.get '"insert linestart+2c","insert lineend"'
}


YDdefe savefile
XIgetcmd
XItgeta $oa data 
XFwrtf data filename
XFfc z notif 'filename,"Saved!"'
XFfc z doSyntax


YDdefe openfile
XIgetcmd
XFfc z myinsert
XFfc z i$fa.cleartxt
XFopft $oa filename
XFfc z notif 'filename,"Opened!"'
XFfc z doSyntax
XFfc z myExit
XFfc z $oa.see 1.0


YDdefe myExit
XFcfg $oa. $ib,$ds
XFfc z $ob.focus


YDdefe myinsert
XFcfg $oa. $ia,$en
XFfc z $oa.focus


YDdefe clearOut
XFfc z i$fd.destroy 
XFfc z $ob.focus


YDdefe mapitOut
XItgetln $ob cmd
XIcv i$fd $fd
XFpl i$fd 400 200 
XFbind $od Escape clearOut
XFshspp $od 'f". pnk.lang ; {cmd}"'
XFfc z $od.see 1.0


YDdefe mapit
XFfc z myinsert
XItgetln $ob cmd
XFshspp $oa 'f". pnk.lang ; {cmd}"'
XFfc z $oa.see 1.0
XFfc z myExit


WFdel() {
	WFfc z $oa.delete '"insert-1c linestart","insert lineend"'
}

XKread() {
	local p="$1"
	XKelif "tt[0] == \"$p\""
}

XKFread() {
	local command="$1"
	local pycom="$2"
	XKelif "tt[0] == \"$pycom\""
	WFtins $oa end "f\"$command {strn}\n\""
	
}

YDdefe sendCode
XItgetln $ob txt
XIfv - tt txt.split
XIv - strn '" ".join( str(i) for i in tt[1:])'
XFcfg $oa. $en

XKif 'tt[0] == "i"'
WFtins $oa insert 'f"{strn}\n"'

XKread c
WFtins $oa insert 'f"# {strn}\n"'

XKread o
WFfc z openfile

XKread w
WFfc z savefile

XKread d
WFfc z i$fa.cleartxt

XKread r
WFdel
WFtins $oa insert 'f"{strn}"'
WFfc z $oa.mark_set '"insert","end"'

XKread rn
WFdel
WFtins $oa insert 'f"{strn}\n"'

XKread dd
WItgetln $oa self.ll
WFdel

XKread dl
WFdel

XKread p
WFtins $oa insert 'f"{self.ll}\n"'

XKread m
WFfc z musicBox

XKread md
WFfc z rmMusic


XKFread '. ./pnk.lang' a00
XKFread ZDshebang a01 
XKFread ZDfrm a02 
XKFread ZDimp a10 
XKFread ZDas a11 
XKFread ZFtoorwin a12 
XKFread ZDdc b00 
XKFread ZDcld b01 #pnk
XKFread ZDcld b02 #py
XKFread XIcv b10 
XKFread ZFmain b11 
XKFread ZDfd c00 
XKFread YDfd c01 
XKFread XDfd c02 
XKFread WDfd c10 
XKFread ZDdefe d00 
XKFread YDret d01 
XKFread YDdefp d10 
XKFread XDret d11 
XKFread YDdefe d12 
XKFread YDdefs d20 
XKFread XDdefe d21 
XKFread WDret d22 
XKFread XDdefs d30 
XKFread WDdefe d31 
XKFread VDret d32 
XKFread WDdefs d40 
XKFread ZFfc e00 
XKFread YFfc e01 
XKFread XFfc e02 
XKFread WFfc e10 
XKFread VFfc e11 
XKFread UFfc e12 
XKFread ZIfv f00 
XKFread YIfv f01 
XKFread XIfv f02 
XKFread WIfv f10 
XKFread VIfv f11 
XKFread UIfv f12 
XKFread ZIv g00 
XKFread YIv g01 
XKFread XIv g02 
XKFread WIv g10 
XKFread VIv g11 
XKFread UIv g12 
XKFread ZIac h00 
XKFread YIac h01 
XKFread XIac h02 
XKFread WIac h10 
XKFread VIac h11 
XKFread UIac h12 
XKFread ZIrd h20 
XKFread YIrd h21 
XKFread XIrd h22 
XKFread WIrd h30 
XKFread VIrd h31 
XKFread UIrd h32 
XKFread YKtry i00 
XKFread YKexcp i01 
XKFread YKfin i02 
XKFread XKtry i10 
XKFread XKexcp i11 
XKFread XKfin i12 
XKFread WKtry i20 
XKFread WKexcp i21 
XKFread WKfin i22 
XKFread VKtry i30 
XKFread VKexcp i31 
XKFread VKfin i32 
XKFread ZKif k00 
XKFread YKif k01 
XKFread XKif k02 
XKFread WKif k10 
XKFread VKif k11 
XKFread UKif k12 
XKFread ZKiff k20 
XKFread YKiff k21 
XKFread XKiff k22 
XKFread WKiff k30 
XKFread VKiff k31 
XKFread UKiff k32 
XKFread ZKelif k40 
XKFread YKelif k41 
XKFread XKelif k42 
XKFread WKelif k50 
XKFread VKelif k51 
XKFread UKelif k52 
XKFread ZKeliff k60 
XKFread YKeliff k61 
XKFread XKeliff k62 
XKFread WKeliff k70 
XKFread VKeliff k71 
XKFread UKeliff k72 
XKFread ZKelse k80 
XKFread YKelse k81 
XKFread XKelse k82 
XKFread WKelse k90 
XKFread VKelse k91 
XKFread UKelse k92 
XKFread YKbr l00 
XKFread XKbr l01 
XKFread WKbr l02 
XKFread VKbr l10 
XKFread UKbr l11 
XKFread YKctn l12 
XKFread XKctn l20 
XKFread WKctn l21 
XKFread VKctn l22 
XKFread UKctn l30 
XKFread YKps l31 
XKFread XKps l32 
XKFread WKps l40 
XKFread VKps l41 
XKFread UKps l42 
XKFread ZLfor m00 
XKFread YLfor m01 
XKFread XLfor m02 
XKFread WLfor m10 
XKFread VLfor m11 
XKFread ULfor m12 
XKFread ZLffor m20 
XKFread YLffor m21 
XKFread XLffor m22 
XKFread WLffor m30 
XKFread VLffor m31 
XKFread ULffor m32 
XKFread ZLwhile m40 
XKFread YLwhile m41 
XKFread XLwhile m42 
XKFread WLwhile m50 
XKFread VLwhile m51 
XKFread ULwhile m52 
XKFread XFbtn w00 
XKFread XFtext w01 
XKFread XFpnwin w02 
XKFread XFnotebk w10 
XKFread XFentry w11 
XKFread XFlabel w12 
XKFread XFlbox w20 
XKFread XIeget t00 
XKFread XItgetln t01 
XKFread XItget t02 
XKFread XItgeta t10 
XKFread WItgetln t11 
XKFread WItget t12 
XKFread WIeget t20 
XKFread XFpk p00 
XKFread XFpl p01
XKFread XFgd p02
XKFread XFgdcfc p10
XKFread XFgdcfr p11
XKFread XFbind p12
XKFread XFbinda p20 
XKFread XFshsp p21
XKFread XFshspp p22
XKFread XFpyev p30
XKFread XFopft v00 
XKFread XFwrtf v01 
XKFread XFset v02 
XKFread XFcfg v10 
XKFread XFedel v11 
XKFread XFeins v12 
XKFread XFtdel v20 
XKFread XFtlndel v21 
XKFread XFtins v22 
XKFread WFtagcfg u00 
XKFread WFtins u01 
XKFread WFset u02 
XKFread WFcfg u10 
XKFread WFedel u11 
XKFread WFeins u12 
XKFread WFtdel u20 
XKFread WFtlndel u21 
XKFread VFtins u22 


XFcfg $oa. $ds
XFfc z doSyntax


YDdefe musicBox
XIcv i$fc $fc
XFpk i$fc 0 none


YDdefe rmMusic
XFfc z i$fc.destroy


ZDcld $fc

XFlbox $wl 64 3
XFcfg $wl. 'font=("Iosevka",16)'
XFpk $wl 0 none

XIcv $ws Text $optc
XFpk $ws 0 none


XFbind $wl Control-r reloadMusic
XFbind $wl Double-Button-1 startMusic
XFbind $wl Return startMusic

XFbind $ws Control-n dlMusic
XFbind $ws Escape clearit

XFfc z loadMusic

YDdefe clearit
XFtdel $ws 1.0 end

YDdefe loadMusic
XIfv - filelist listdir "\"$MP3_DIR\""
XIfv - musiclist sorted filelist
XLfor song musiclist
WFtins $wl end 'f"{song}"'


YDdefe reloadMusic
XFedel $wl
XFfc z loadMusic


YDdefp cleanfn fn
XIv - vc '"-"'
XIv - out '""'
XLfor c fn
WKif 'str.isalnum(c) or (c in vc)'
VIac - out c
WKelse
VIac - out '""'
XDret out


YDdefp notif n,m
XIv z n n
XIv z m m
XFtins $ws 1.0 "f\"$datenow {n} {m}\n\""


YDdefe getMp3
XItgetln $ws url
XFfc z notif 'url,"Downloading"'
XIv - filepath "\"$MP3_DIR\""
XIfv - daurl YouTube url
XIfv - damusic daurl.streams.filter 'only_audio=True'
XIfv - music damusic.first
XIfv - raw music.download 'output_path=filepath'
XIfv - head,t path.splitext raw
XIfv - base path.basename head
XIfv -z filename cleanfn base
XIv - outfile 'f"{filepath}{filename}.mp3"'
XFfc - rename raw,outfile
XFfc z reloadMusic
XFfc z notif 'filename,"Ready 2 Play!"'


YDdefe playMp3
XIfv -zz sel $wl.get "$wl.curselection()"
XFfc - system "f\"mpv $MP3_DIR{sel}\""


YDdefe dlMusic
XFfc zz $M.thdStart getMp3


YDdefe startMusic
XFfc zz $M.thdStart playMp3



ZDcld $fa
XIcv $ta Text $opta
XFpk $ta 1 y
XFbind $ta space $M.myinsert
YDdefe cleartxt
XFtdel $ta 1.0 end


ZDcld $fb
XIcv $tb Text $optb
XFpk $tb 0 none
XFfc z $tb.focus
XFbind $tb Escape cleartxt
YDdefe cleartxt
XFtdel $tb 1.0 end


ZDcld $fd
XIcv $td Text $optd 
XFpk $td 0 none
XFfc z $td.focus


ZFmain Shimky shimky

