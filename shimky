. pnk.lang

MP3_DIR=

ca=CommA
cb=ShellOut
ma=txtW
mb=shellout
oa=i$ca.$ma
od=i$cb.$mb
ws=mp3Cmd
wl=musicBox
M=master

aa='fg="#DDD"'
bb='bg="#222"'
bd=bg=$bg
fa='font=("VictorMono",16)'
ee='cursor="pencil"'
ff='cursor="shuttle"'
fe='cursor="spider"'
gg=highlightbackground=$bg
hh='highlightbackground="#444"'
ia='highlightcolor="#2BCDBB"'
ib='highlightcolor="#222"'
ic='highlightcolor="red"'
id='highlightcolor="orange"'
jc='insertbackground="red"'
kk='relief="flat"'
uu='undo=True'
ll='padx=12'
mm='pady=12'
abc='blockcursor=True'
ds='state="disabled"'
en='state="normal"'
wb='width=10'
wr='wrap="word"'
wd='height=16'

opta=$aa,$bd,$ee,$gg,$ib,$kk,$wb,$fa
optb=$jc,$fa,$hh,$fe,width=32
optc=width=100,$ia,$uu,$abc,$mm,$ll,$ff,$fa,$jc,$hh,$bb,$ds,$wr
optd=$aa,$bd,$ee,$gg,$id,$jc,$kk,$ll,$mm,$uu,$abc,$wd,$fa

ZDshebang 
ZDfrm tkinter Tk,Frame,Text,Entry,PanedWindow,Listbox
ZDfrm re finditer
ZDfrm threading Thread
ZDfrm os listdir,system,rename,path
ZDfrm pytube YouTube
ZDimp subprocess
ZDimp datetime

ZFtoorwin Pnk
XFpnwin pw '"horizontal"'
XFpk pw 1 both
XFfc z run

XFbinda Control-r run


YDdefe run
XIcv app App
XFfc zz pw.add app



ZDcld App
XIcv cli Entry $opta
XFpk cli 0 none
XFcfg cli. $optb
XFfc z cli.focus

XIcv i$ca $ca
XFpk i$ca 0 y $sl

XIcv rec $ca
XFpk rec 1 both $sl
XFcfg rec.$ma. $optc

XFbind cli Escape cliclr
XFbind cli Return cliSh
XFbind rec.$ma Shift_R rec.doSyntax
XFbind rec.$ma Escape myExit
XFbind rec.$ma Button-3 myins

XFbind $oa Double-Button-1 sendPnk
XFtins $oa insert 'f"ZDshebang\n"'
XFtins $oa insert 'f"ZDfrm\n"'
XFtins $oa insert 'f"ZDimp\n"'
XFtins $oa insert 'f"ZDas\n"'
XFtins $oa insert 'f"ZFtoorwin\n"'
XFtins $oa insert 'f"ZDdc\n"'
XFtins $oa insert 'f"ZDcld\n"'
XFtins $oa insert 'f"XIcv\n"'
XFtins $oa insert 'f"ZFmain\n"'
XFtins $oa insert 'f"ZDfd\n"'
XFtins $oa insert 'f"YDfd\n"'
XFtins $oa insert 'f"XDfd\n"'
XFtins $oa insert 'f"WDfd\n"'
XFtins $oa insert 'f"ZDdefe\n"'
XFtins $oa insert 'f"YDret\n"'
XFtins $oa insert 'f"YDdefp\n"'
XFtins $oa insert 'f"XDret\n"'
XFtins $oa insert 'f"YDdefe\n"'
XFtins $oa insert 'f"YDdefs\n"'
XFtins $oa insert 'f"XDdefe\n"'
XFtins $oa insert 'f"WDret\n"'
XFtins $oa insert 'f"XDdefs\n"'
XFtins $oa insert 'f"WDdefe\n"'
XFtins $oa insert 'f"VDret\n"'
XFtins $oa insert 'f"WDdefs\n"'
XFtins $oa insert 'f"ZFfc\n"'
XFtins $oa insert 'f"YFfc\n"'
XFtins $oa insert 'f"XFfc\n"'
XFtins $oa insert 'f"WFfc\n"'
XFtins $oa insert 'f"VFfc\n"'
XFtins $oa insert 'f"UFfc\n"'
XFtins $oa insert 'f"ZIfv\n"'
XFtins $oa insert 'f"YIfv\n"'
XFtins $oa insert 'f"XIfv\n"'
XFtins $oa insert 'f"WIfv\n"'
XFtins $oa insert 'f"VIfv\n"'
XFtins $oa insert 'f"UIfv\n"'
XFtins $oa insert 'f"ZIv\n"'
XFtins $oa insert 'f"YIv\n"'
XFtins $oa insert 'f"XIv\n"'
XFtins $oa insert 'f"WIv\n"'
XFtins $oa insert 'f"VIv\n"'
XFtins $oa insert 'f"UIv\n"'
XFtins $oa insert 'f"ZIac\n"'
XFtins $oa insert 'f"YIac\n"'
XFtins $oa insert 'f"XIac\n"'
XFtins $oa insert 'f"WIac\n"'
XFtins $oa insert 'f"VIac\n"'
XFtins $oa insert 'f"UIac\n"'
XFtins $oa insert 'f"ZIrd\n"'
XFtins $oa insert 'f"YIrd\n"'
XFtins $oa insert 'f"XIrd\n"'
XFtins $oa insert 'f"WIrd\n"'
XFtins $oa insert 'f"VIrd\n"'
XFtins $oa insert 'f"UIrd\n"'
XFtins $oa insert 'f"ZIdvd\n"'
XFtins $oa insert 'f"YIdvd\n"'
XFtins $oa insert 'f"XIdvd\n"'
XFtins $oa insert 'f"WIdvd\n"'
XFtins $oa insert 'f"VIdvd\n"'
XFtins $oa insert 'f"UIdvd\n"'
XFtins $oa insert 'f"YKtry\n"'
XFtins $oa insert 'f"YKexcp\n"'
XFtins $oa insert 'f"YKfin\n"'
XFtins $oa insert 'f"XKtry\n"'
XFtins $oa insert 'f"XKexcp\n"'
XFtins $oa insert 'f"XKfin\n"'
XFtins $oa insert 'f"WKtry\n"'
XFtins $oa insert 'f"WKexcp\n"'
XFtins $oa insert 'f"WKfin\n"'
XFtins $oa insert 'f"VKtry\n"'
XFtins $oa insert 'f"VKexcp\n"'
XFtins $oa insert 'f"VKfin\n"'
XFtins $oa insert 'f"ZKif\n"'
XFtins $oa insert 'f"YKif\n"'
XFtins $oa insert 'f"XKif\n"'
XFtins $oa insert 'f"WKif\n"'
XFtins $oa insert 'f"VKif\n"'
XFtins $oa insert 'f"UKif\n"'
XFtins $oa insert 'f"ZKiff\n"'
XFtins $oa insert 'f"YKiff\n"'
XFtins $oa insert 'f"XKiff\n"'
XFtins $oa insert 'f"WKiff\n"'
XFtins $oa insert 'f"VKiff\n"'
XFtins $oa insert 'f"UKiff\n"'
XFtins $oa insert 'f"ZKelif\n"'
XFtins $oa insert 'f"YKelif\n"'
XFtins $oa insert 'f"XKelif\n"'
XFtins $oa insert 'f"WKelif\n"'
XFtins $oa insert 'f"VKelif\n"'
XFtins $oa insert 'f"UKelif\n"'
XFtins $oa insert 'f"ZKeliff\n"'
XFtins $oa insert 'f"YKeliff\n"'
XFtins $oa insert 'f"XKeliff\n"'
XFtins $oa insert 'f"WKeliff\n"'
XFtins $oa insert 'f"VKeliff\n"'
XFtins $oa insert 'f"UKeliff\n"'
XFtins $oa insert 'f"ZKelse\n"'
XFtins $oa insert 'f"YKelse\n"'
XFtins $oa insert 'f"XKelse\n"'
XFtins $oa insert 'f"WKelse\n"'
XFtins $oa insert 'f"VKelse\n"'
XFtins $oa insert 'f"UKelse\n"'
XFtins $oa insert 'f"YKbr\n"'
XFtins $oa insert 'f"XKbr\n"'
XFtins $oa insert 'f"WKbr\n"'
XFtins $oa insert 'f"VKbr\n"'
XFtins $oa insert 'f"UKbr\n"'
XFtins $oa insert 'f"YKctn\n"'
XFtins $oa insert 'f"XKctn\n"'
XFtins $oa insert 'f"WKctn\n"'
XFtins $oa insert 'f"VKctn\n"'
XFtins $oa insert 'f"UKctn\n"'
XFtins $oa insert 'f"YKps\n"'
XFtins $oa insert 'f"XKps\n"'
XFtins $oa insert 'f"WKps\n"'
XFtins $oa insert 'f"VKps\n"'
XFtins $oa insert 'f"UKps\n"'
XFtins $oa insert 'f"ZLfor\n"'
XFtins $oa insert 'f"YLfor\n"'
XFtins $oa insert 'f"XLfor\n"'
XFtins $oa insert 'f"WLfor\n"'
XFtins $oa insert 'f"VLfor\n"'
XFtins $oa insert 'f"ULfor\n"'
XFtins $oa insert 'f"ZLffor\n"'
XFtins $oa insert 'f"YLffor\n"'
XFtins $oa insert 'f"XLffor\n"'
XFtins $oa insert 'f"WLffor\n"'
XFtins $oa insert 'f"VLffor\n"'
XFtins $oa insert 'f"ULffor\n"'
XFtins $oa insert 'f"ZLwhile\n"'
XFtins $oa insert 'f"YLwhile\n"'
XFtins $oa insert 'f"XLwhile\n"'
XFtins $oa insert 'f"WLwhile\n"'
XFtins $oa insert 'f"VLwhile\n"'
XFtins $oa insert 'f"ULwhile\n"'
XFtins $oa insert 'f"XFbtn\n"'
XFtins $oa insert 'f"XFtext\n"'
XFtins $oa insert 'f"XFpnwin\n"'
XFtins $oa insert 'f"XFnotebk\n"'
XFtins $oa insert 'f"XFentry\n"'
XFtins $oa insert 'f"XFlabel\n"'
XFtins $oa insert 'f"XFlbox\n"'
XFtins $oa insert 'f"XIeget\n"'
XFtins $oa insert 'f"XItgetln\n"'
XFtins $oa insert 'f"XItget\n"'
XFtins $oa insert 'f"XItgeta\n"'
XFtins $oa insert 'f"WItgetln\n"'
XFtins $oa insert 'f"WItget\n"'
XFtins $oa insert 'f"WIeget\n"'
XFtins $oa insert 'f"XFpk\n"'
XFtins $oa insert 'f"XFpl\n"'
XFtins $oa insert 'f"XFgd\n"'
XFtins $oa insert 'f"XFgdcfc\n"'
XFtins $oa insert 'f"XFgdcfr\n"'
XFtins $oa insert 'f"XFbind\n"'
XFtins $oa insert 'f"XFbinda\n"'
XFtins $oa insert 'f"XFshsp\n"'
XFtins $oa insert 'f"XFshspp\n"'
XFtins $oa insert 'f"XFpyev\n"'
XFtins $oa insert 'f"XFopft\n"'
XFtins $oa insert 'f"XFwrtf\n"'
XFtins $oa insert 'f"XFset\n"'
XFtins $oa insert 'f"XFcfg\n"'
XFtins $oa insert 'f"XFedel\n"'
XFtins $oa insert 'f"XFeins\n"'
XFtins $oa insert 'f"XFtdel\n"'
XFtins $oa insert 'f"XFtlndel\n"'
XFtins $oa insert 'f"XFtins\n"'
XFtins $oa insert 'f"WFtagcfg\n"'
XFtins $oa insert 'f"WFtins\n"'
XFtins $oa insert 'f"WFset\n"'
XFtins $oa insert 'f"WFcfg\n"'
XFtins $oa insert 'f"WFedel\n"'
XFtins $oa insert 'f"WFeins\n"'
XFtins $oa insert 'f"WFtdel\n"'
XFtins $oa insert 'f"WFtlndel\n"'
XFtins $oa insert 'f"VFtins\n"'
XFfc z i$ca.doSyntax
XFcfg $oa. $ds


YDdefe clearOut
XFfc z i$cb.destroy 
XFfc z cli.focus


YDdefe sendBack
XItgeta $od data
XFfc z myins
XFtins rec.$ma 1.0 data
XFfc z myExit
XFfc z $od.focus


YDdefe mapitOut
XIeget cli line
XIfv - tt line.split
XIv - cmd '" ".join( str(i) for i in tt[1:])'
XIcv i$cb $cb
XFpl i$cb 165 100
XFbind $od Escape clearOut
XFbind $od Control-Return sendBack
XFshspp $od 'f". pnk.lang ; {cmd}"'
XFfc z $od.see 1.0
XFfc z cliclr


YDdefe musicBox
XIcv mp3 Mp3
XFpk mp3 0 none


YDdefe rmMusic
XFfc z mp3.destroy


YDdefe myExit
XFcfg rec.$ma. $ds,$ic
XFfc z cli.focus


YDdefe myins
XFcfg rec.$ma. $en,$ia
XFfc z rec.$ma.focus


YDdefe sendPnk
XItgetln $oa line
XFfc z myins
XFtins rec.$ma insert 'f"{line} "' 
XFfc z rec.doSyntax
XIv - line '""'
XFfc z rec.see


YDdefe cliSh
XIeget cli line
XIfv - tt line.split

XKif 'tt[0] == "o"'
WFfc z openfile

XKread() {
	local p="$1"
	XKelif "tt[0] == \"$p\""
}

XKread i
WFfc z myins

XKread w
WFfc z savefile

XKread d
WFfc z myins
WFfc z rec.cleartxt
WFfc z myExit

XKread m
WFfc z musicBox

XKread md
WFfc z rmMusic

XKread s
WFfc z mapitOut



XIgetfilenm() {
	XIeget cli line
	XIfv - f line.split
}


YDdefe openfile
XIgetfilenm
XFfc z rec.cleartxt
XFfc z myins
XFfc z rec.cleartxt
XFopft rec.$ma 'f[1]'
XFfc z rec.doSyntax
XFfc z myExit


YDdefe savefile
XIgetfilenm
XItgeta rec.$ma data 
XFwrtf data 'f[1]'
XFfc z rec.doSyntax


YDdefe cliclr
XFedel cli


YDdefp thdStart x
XIv z x x
XIfv - thd Thread 'target=x,daemon=True'
XFfc - thd.start



ZDcld Mp3
XFlbox $wl 50 20
XFcfg $wl. $fa,$bd,$aa,$gg,$kk
XFpk $wl 0 none
XIcv $ws Text width=80,height=3,$ia,$uu,$abc,$ff,$fa,$jc,$hh,$aa,$bb,$kk
XFpk $ws 0 none
XFbind $wl Control-r reloadMusic
XFbind $wl Double-Button-1 startMusic
XFbind $wl Return startMusic
XFbind $ws Control-n dlMusic
XFbind $ws Escape clearit
XFfc z loadMusic
YDdefe clearit
XFtdel $ws 1.0 end
YDdefe loadMusic
XIfv - filelist listdir "\"$MP3_DIR\""
XIfv - musiclist sorted filelist
XLfor song musiclist
WFtins $wl end 'f"{song}"'
YDdefe reloadMusic
XFedel $wl
XFfc z loadMusic
YDdefp cleanfn fn
XIv - vc '"-"'
XIv - out '""'
XLfor c fn
WKif 'str.isalnum(c) or (c in vc)'
VIac - out c
WKelse
VIac - out '""'
XDret out
YDdefp notif n,m
XIv z n n
XIv z m m
XFtins $ws 1.0 "f\"$datenow {n} {m}\n\""
YDdefe getMp3
XItgetln $ws url
XFfc z notif 'url,"Downloading"'
XIv - filepath "\"$MP3_DIR\""
XIfv - daurl YouTube url
XIfv - damusic daurl.streams.filter 'only_audio=True'
XIfv - music damusic.first
XIfv - raw music.download 'output_path=filepath'
XIfv - head,t path.splitext raw
XIfv - base path.basename head
XIfv -z filename cleanfn base
XIv - outfile 'f"{filepath}{filename}.mp3"'
XFfc - rename raw,outfile
XFfc z reloadMusic
XFfc z notif 'filename,"Ready 2 Play!"'
YDdefe playMp3
XIfv -zz sel $wl.get "$wl.curselection()"
XFfc - system "f\"mpv $MP3_DIR{sel}\""
YDdefe dlMusic
XFfc zz $M.thdStart getMp3
YDdefe startMusic
XFfc zz $M.thdStart playMp3



ZDcld $ca
XIcv $ma Text $opta
XFpk $ma 1 both
XFfc z synThd
XFfc z tagConf
XFfc z doSyntax
YDdefe synThd
XFfc zz $M.thdStart doSyntax
YDdefe cleartxt
XFtdel $ma 1.0 end
YDdefe doSyntax
XFfc zz syntax $ma
YDdefe tagConf
XIv - d '{ "arg": ("#333", "#eccca2"), "args": ("#444", "#eccca2"), "Z": ("green", "green"), "Y": ("#bfff00", "#bfff00"), "X": ("#ffb732", "#ffb732"), "W": ("#00ffff", "#00ffff"), "V": ("blue", "blue"), "U": ("#430075", "#430075"), "L": ("red", "red"), "K": ("blue", "blue"), "F": ("green", "green"), "I": ("#ffff32", "#ffff32"), "D": ("purple", "purple"),  "z": ("#202124", "#bfff00"), "dol": ("black", "black"), "eql": ("#202124", "#00ffff"),"dash": ("#202124", "#00ffff"),"dot": ("#202124", "#bfff00"), "pls": ("#202124", "#00ffff"), "star": ("#202124", "#00ffff"),}'
XLffor key,value d.items
WFtagcfg $ma key value[0] value[1]
YDdefp tagg x,y,a,b
XIv z x x
XIv z y y
XIv z a a
XIv z b b
XFfc z x.tag_add 'y,f"1.0+{a}c",f"1.0+{b}c"'
YDdefp syntax xx
XIv z xx xx
XItgeta xx data
XIv - SQ_idx "[(m.start(),m.end()) for m in finditer(r'\'(.*?)\'', data)]"
XLfor start,end SQ_idx
WFfc z tagg 'xx,"arg",start,end'
XIv - dQ_idx "[(m.start(),m.end()) for m in finditer(r'\"(.*?)\"', data)]"
XLfor start,end dQ_idx
WFfc z tagg 'xx,"args",start,end'
XIv - dol_idx "[(m.start(),m.end()) for m in finditer(r'\\$', data)]"
XLfor start,end dol_idx
WFfc z tagg 'xx,"dol",start,end'
XIv - dot_idx "[(m.start(),m.end()) for m in finditer(r'\.', data)]"
XLfor start,end dot_idx
WFfc z tagg 'xx,"dot",start,end'
XIv - dash_idx "[(m.start(),m.end()) for m in finditer(r'-', data)]"
XLfor start,end dash_idx
WFfc z tagg 'xx,"dash",start,end'
XIv - eql_idx "[(m.start(),m.end()) for m in finditer(r'=', data)]"
XLfor start,end eql_idx
WFfc z tagg 'xx,"eql",start,end'
XIv - pls_idx "[(m.start(),m.end()) for m in finditer(r'\+', data)]"
XLfor start,end pls_idx
WFfc z tagg 'xx,"pls",start,end'
XIv - star_idx "[(m.start(),m.end()) for m in finditer(r'\*', data)]"
XLfor start,end star_idx
WFfc z tagg 'xx,"star",start,end'
XIv - z_idx "[(m.start(),m.end()) for m in finditer(r'z', data)]"
XLfor start,end z_idx
WFfc z tagg 'xx,"z",start,end'
XIv - D_idx "[(m.start(),m.end()) for m in finditer(r'D', data)]"
XLfor start,end D_idx
WFfc z tagg 'xx,"D",start,end'
XIv - F_idx "[(m.start(),m.end()) for m in finditer(r'F', data)]"
XLfor start,end F_idx
WFfc z tagg 'xx,"F",start,end'
XIv - I_idx "[(m.start(),m.end()) for m in finditer(r'I', data)]"
XLfor start,end I_idx
WFfc z tagg 'xx,"I",start,end'
XIv - K_idx "[(m.start(),m.end()) for m in finditer(r'K', data)]"
XLfor start,end K_idx
WFfc z tagg 'xx,"K",start,end'
XIv - L_idx "[(m.start(),m.end()) for m in finditer(r'L', data)]"
XLfor start,end L_idx
WFfc z tagg 'xx,"L",start,end'
XIv - Z_idx "[(m.start(),m.end()) for m in finditer(r'Z', data)]"
XLfor start,end Z_idx
WFfc z tagg 'xx,"Z",start,end'
XIv - U_idx "[(m.start(),m.end()) for m in finditer(r'U', data)]"
XLfor start,end U_idx
WFfc z tagg 'xx,"U",start,end'
XIv - V_idx "[(m.start(),m.end()) for m in finditer(r'V', data)]"
XLfor start,end V_idx
WFfc z tagg 'xx,"V",start,end'
XIv - W_idx "[(m.start(),m.end()) for m in finditer(r'W', data)]"
XLfor start,end W_idx
WFfc z tagg 'xx,"W",start,end'
XIv - X_idx "[(m.start(),m.end()) for m in finditer(r'X', data)]"
XLfor start,end X_idx
WFfc z tagg 'xx,"X",start,end'
XIv - Y_idx "[(m.start(),m.end()) for m in finditer(r'Y', data)]"
XLfor start,end Y_idx
WFfc z tagg 'xx,"Y",start,end'


ZDcld $cb
XIcv $mb Text $optd 
XFpk $mb 0 none
XFfc z $mb.focus

ZFmain Pnk pnk-ide

